{% extends "base.html" %}

{% block title %}Create Event | ATTSYS{% endblock %}

{% block extra_css %}
<style>
    /* Create Event Page Specific Styles */
    .create-event-container {
        max-width: 600px;
        margin: 0 auto;
    }
    
    .page-header {
        margin-bottom: 2rem;
        text-align: center;
    }
    
    .form-card {
        background: white;
        border: 1px solid #e9ecef;
        border-radius: 12px;
        padding: 2rem;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        transition: all 0.3s ease;
    }
    
    .form-card:hover {
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
    }
    
    .form-title {
        color: var(--dark);
        font-weight: 600;
        margin-bottom: 0.5rem;
        text-align: center;
    }
    
    .form-subtitle {
        color: var(--gray-600);
        text-align: center;
        margin-bottom: 2rem;
        font-size: 0.875rem;
    }
    
    .form-label {
        font-weight: 500;
        color: var(--gray-800);
        margin-bottom: 0.5rem;
        display: block;
    }
    
    .form-control, .form-select {
        border: 1px solid var(--gray-300);
        border-radius: 8px;
        padding: 0.625rem 1rem;
        font-size: 0.875rem;
        transition: all 0.2s ease;
        background: white;
    }
    
    .form-control:focus, .form-select:focus {
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgba(13, 110, 253, 0.1);
        outline: none;
    }
    
    .form-control::placeholder {
        color: var(--gray-500);
    }
    
    .form-group {
        margin-bottom: 1.5rem;
    }
    
    .form-group-row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 1rem;
    }
    
    .btn-submit {
        background: var(--dark);
        color: white;
        border: none;
        border-radius: 8px;
        padding: 0.75rem 2rem;
        font-weight: 500;
        font-size: 0.875rem;
        width: 100%;
        transition: all 0.2s ease;
        margin-top: 1rem;
    }
    
    .btn-submit:hover {
        background: var(--gray-800);
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }
    
    .btn-submit:active {
        transform: translateY(0);
    }
    
    .form-icon {
        color: var(--primary);
        margin-right: 0.5rem;
    }
    
    .form-hint {
        font-size: 0.75rem;
        color: var(--gray-600);
        margin-top: 0.5rem;
        display: block;
    }
    
    .required::after {
        content: " *";
        color: #dc3545;
    }
    
    @media (max-width: 768px) {
        .form-group-row {
            grid-template-columns: 1fr;
            gap: 1rem;
        }
        
        .form-card {
            padding: 1.5rem;
        }
        
        .create-event-container {
            padding: 0 1rem;
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="create-event-container">
    <!-- Page Header -->
    <div class="page-header">
        <h1 class="h3 fw-bold mb-2 text-dark">Create New Event</h1>
        <p class="text-muted fs-6">
            Set up a new event for attendance tracking and management
        </p>
    </div>
    
    <!-- Form Card -->
    <div class="form-card">
        <form method="post">
            {% csrf_token %}
            
            <!-- Event Title -->
            <div class="form-group">
                <label class="form-label required">
                    <i class="bi bi-card-heading form-icon"></i>
                    Event Title
                </label>
                <input
                    type="text"
                    name="title"
                    class="form-control"
                    placeholder="Enter event title"
                    required
                    aria-label="Event title"
                >
                <span class="form-hint">
                    A clear, descriptive title for your event
                </span>
            </div>
            
            <!-- Venue -->
            <div class="form-group">
                <label class="form-label required">
                    <i class="bi bi-geo-alt form-icon"></i>
                    Venue
                </label>
                <input
                    type="text"
                    name="venue"
                    class="form-control"
                    placeholder="Enter venue location"
                    required
                    aria-label="Event venue"
                >
                <span class="form-hint">
                    Physical location or virtual meeting link
                </span>
            </div>
            
            <!-- Date and Time Row -->
            <div class="form-group">
                <label class="form-label required">
                    <i class="bi bi-calendar form-icon"></i>
                    Date
                </label>
                <input
                    type="date"
                    name="date"
                    class="form-control"
                    required
                    aria-label="Event date"
                >
                <span class="form-hint">
                    Select the event date
                </span>
            </div>
            
            <div class="form-group-row">
                <!-- Start Time -->
                <div class="form-group">
                    <label class="form-label required">
                        <i class="bi bi-clock form-icon"></i>
                        Start Time
                    </label>
                    <input
                        type="time"
                        name="start_time"
                        class="form-control"
                        required
                        aria-label="Event start time"
                    >
                    <span class="form-hint">
                        Event start time
                    </span>
                </div>
                
                <!-- End Time -->
                <div class="form-group">
                    <label class="form-label required">
                        <i class="bi bi-clock-history form-icon"></i>
                        End Time
                    </label>
                    <input
                        type="time"
                        name="end_time"
                        class="form-control"
                        required
                        aria-label="Event end time"
                    >
                    <span class="form-hint">
                        Event end time
                    </span>
                </div>
            </div>
            
            <!-- Description (Optional - Future Enhancement) -->
            <!-- 
            <div class="form-group">
                <label class="form-label">
                    <i class="bi bi-text-paragraph form-icon"></i>
                    Description (Optional)
                </label>
                <textarea
                    name="description"
                    class="form-control"
                    placeholder="Enter event description"
                    rows="3"
                    aria-label="Event description"
                ></textarea>
                <span class="form-hint">
                    Provide additional details about the event
                </span>
            </div>
            -->
            
            <!-- Form Actions -->
            <div class="form-actions mt-4 pt-3 border-top">
                <div class="d-flex gap-2">
                    <a href="{% url 'dashboard' %}" class="btn btn-outline-dark flex-fill">
                        <i class="bi bi-arrow-left me-2"></i>
                        Cancel
                    </a>
                    <button type="submit" class="btn-submit flex-fill">
                        <i class="bi bi-plus-circle me-2"></i>
                        Create Event
                    </button>
                </div>
            </div>
            
        </form>
    </div>
    
    <!-- Quick Tips -->
    <div class="mt-4">
        <div class="d-flex align-items-start text-muted fs-7">
            <i class="bi bi-info-circle me-2 mt-1"></i>
            <div>
                <span class="fw-medium">Tip:</span> After creating the event, you can generate a QR code for check-in,
                assign staff, and monitor attendance in real-time from the event details page.
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Set minimum date to today
        const dateInput = document.querySelector('input[name="date"]');
        const today = new Date().toISOString().split('T')[0];
        dateInput.min = today;
        
        // Set initial value to today
        dateInput.value = ;
        
        // Set reasonable default times
        const startTimeInput = document.querySelector('input[name="start_time"]');
        const endTimeInput = document.querySelector('input[name="end_time"]');
        
        // Set default start time to 9:00 AM
        startTimeInput.value = '';
        
        // Set default end time to 5:00 PM
        endTimeInput.value = '';
        
        // Add validation for end time > start time
        const form = document.querySelector('form');
        form.addEventListener('submit', function(e) {
            const startTime = startTimeInput.value;
            const endTime = endTimeInput.value;
            
            if (startTime >= endTime) {
                e.preventDefault();
                alert('End time must be after start time.');
                endTimeInput.focus();
                return false;
            }
            
            // Validate date is not in the past
            const selectedDate = new Date(dateInput.value);
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            
            if (selectedDate < today) {
                e.preventDefault();
                alert('Event date cannot be in the past.');
                dateInput.focus();
                return false;
            }
        });
        
        // Add focus styles with animation
        const formControls = document.querySelectorAll('.form-control, .form-select');
        formControls.forEach(control => {
            control.addEventListener('focus', function() {
                this.parentElement.style.transform = 'translateY(-2px)';
                this.parentElement.style.transition = 'transform 0.2s ease';
            });
            
            control.addEventListener('blur', function() {
                this.parentElement.style.transform = 'translateY(0)';
            });
        });
        
        // Auto-focus first input
        const firstInput = document.querySelector('input[name="title"]');
        firstInput.focus();
    });
</script>
{% endblock %}